<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.forcewave.safety.dao.SafetyDAO">
	
	<select id="selectSafetyList" resultType="kr.or.forcewave.safety.vo.SafetyVO">
		SELECT
			GID
			, SAFETY_CODE
			, SAFETY_NM
			, COALESCE(SAFETY_ADDR, "주소 정보가 입력되지 않았습니다.")
			, SAFETY_EMD
			, ST_X(GEOM) AS SAFETY_LON
			, ST_Y(GEOM) AS SAFETY_LAT
			, SAFETY_X
			, SAFETY_Y
			, SAFETY_GUBUN
			, SAFETY_SORT
		FROM SAFETY
	</select>

	<select id="selectSafety" parameterType="String" resultType="kr.or.forcewave.safety.vo.SafetyVO">
		SELECT
			GID
			, SAFETY_CODE
			, SAFETY_NM
			, COALESCE(SAFETY_ADDR, '주소 정보가 입력되지 않았습니다.')
			, SAFETY_EMD
			, ST_X(GEOM) AS SAFETY_LON
			, ST_Y(GEOM) AS SAFETY_LAT
			, SAFETY_X
			, SAFETY_Y
			, SAFETY_GUBUN
			, SAFETY_SORT
		FROM SAFETY
		WHERE GID = #{gid}
	</select>

	<insert id="InsertSafety" parameterType="kr.or.forcewave.safety.vo.SafetyVO">
		<selectKey order="BEFORE" resultType="String" keyProperty="gid">
			SELECT	NEXTVAL(MAX(GID))
			FROM SAFETY
		</selectKey>
		INSERT INTO SAFETY (
			GID
			, SAFETY_CODE
			, SAFETY_NM
			, SAFETY_ADDR
			, SAFETY_EMD
			, ST_X(GEOM) AS SAFETY_LON
			, ST_Y(GEOM) AS SAFETY_LAT
			, SAFETY_X
			, SAFETY_Y
			, SAFETY_GUBUN
			, SAFETY_SORT
		) VALUE (
			
		) 
	</insert>
</mapper>